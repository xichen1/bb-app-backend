(this["webpackJsonpbb-app"]=this["webpackJsonpbb-app"]||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),a=n.n(r),o=n(5),s=n.n(o),i=n(7),u=n(9),l=n(24),j=n.n(l),b="/api/books",d=function(){return j.a.get(b).then((function(e){return e.data}))},p=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=(n(57),function(e){var t=e.errorType,n=e.errorInfo;return Object(c.jsxs)("div",{className:"errorContainer",children:[Object(c.jsx)("div",{children:"".concat(t," error!")}),Object(c.jsx)("div",{children:n})]})}),h=function(e){var t=e.setBooks,n=e.bookList,a=Object(r.useState)(""),o=Object(u.a)(a,2),s=o[0],i=o[1],l=Object(r.useState)(""),j=Object(u.a)(l,2),b=j[0],d=j[1],h=Object(r.useState)(""),x=Object(u.a)(h,2),v=x[0],f=x[1],m=Object(r.useState)(null),g=Object(u.a)(m,2),w=g[0],k=g[1],S=Object(r.useState)(null),C=Object(u.a)(S,2),N=C[0],y=C[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c,r={title:s,author:b,about:v};""===(c=r).title||""===c.author||""===c.about?(console.log(123),k("new book creation"),y("invalid input"),setTimeout((function(){k(null),y(null)}),3e3)):p(r).then((function(e){t(n.concat(e)),i(""),d(""),f("")})).catch((function(e){k("new book creation"),y("error"),setTimeout((function(){k(null),y(null)}),3e3)}))},children:[Object(c.jsx)("label",{htmlFor:"newTitle",children:"Title: "}),Object(c.jsx)("input",{value:s,id:"newTitle",onChange:function(e){e.preventDefault(),i(e.target.value)}}),Object(c.jsx)("label",{htmlFor:"newAuthor",children:"Author: "}),Object(c.jsx)("input",{value:b,id:"newAuthor",onChange:function(e){e.preventDefault(),d(e.target.value)}}),Object(c.jsx)("label",{htmlFor:"newAbout",children:"About: "}),Object(c.jsx)("input",{value:v,id:"newAbout",onChange:function(e){e.preventDefault(),f(e.target.value)}}),Object(c.jsx)("button",{type:"submit",children:"submit"})]}),null===w?Object(c.jsx)("div",{}):Object(c.jsx)(O,{errorType:w,errorInfo:N})]})},x=n(19),v=(n(58),function(e){var t=e.title,n=e.author,r=e.about,a=e.id;return Object(c.jsxs)("div",{className:"bookItemContainer",children:[Object(c.jsx)("h3",{className:"bookTitleContainer",children:Object(c.jsx)(x.b,{to:"/bookdetails/".concat(a),children:t})}),Object(c.jsxs)("small",{className:"bookAuthorContainer",children:["author: ",n]}),Object(c.jsx)("p",{className:"bookAboutContainer",children:r})]})}),f=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){return d().then((function(e){a(e)}))}),[]),Object(c.jsxs)("div",{children:[n.map((function(e){return Object(c.jsx)("div",{children:Object(c.jsx)(v,{title:e.title,author:e.author,about:e.about,id:e.id})},e.id)})),Object(c.jsx)(h,{setBooks:a,bookList:n})]})},m=n(59),g=n(12),w=n(125),k=n(126),S=n(47),C=n.n(S),N=Object(g.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(c.jsx)(w.a,Object(m.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),y=function(e){var t=e.user,n=e.logout,r=a.a.useState(null),o=Object(u.a)(r,2),s=o[0],i=o[1],l=function(e){i(e.currentTarget)},j=function(){i(null)};return null===t?Object(c.jsxs)("div",{children:[Object(c.jsx)(C.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",onClick:l,style:{fontSize:40,color:"black",cursor:"pointer"},children:"open"}),Object(c.jsxs)(N,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:j,children:[Object(c.jsx)(x.b,{to:"/login",style:{color:"black",textDecoration:"none"},children:Object(c.jsx)(k.a,{children:"Sign In"})}),Object(c.jsx)(k.a,{children:"My account"})]})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)(C.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",onClick:l,style:{fontSize:50,color:"black",cursor:"pointer"},children:"open"}),Object(c.jsxs)(N,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:j,children:[Object(c.jsx)(k.a,{children:"My account"}),Object(c.jsx)(k.a,{onClick:n,children:"Logout"})]})]})},I=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);a(t)}}),[]);return Object(c.jsx)("div",{className:"projectContainer",children:Object(c.jsx)("div",{className:"mainContentContainer",children:Object(c.jsxs)("div",{className:"titleBookContainer",children:[Object(c.jsxs)("div",{className:"titleStatusContainer",children:[Object(c.jsx)("h1",{className:"webTitle",children:"Book Review Board"}),Object(c.jsx)(y,{className:"status",user:n,logout:function(){a(null),window.localStorage.removeItem("loggedNoteappUser")}})]}),Object(c.jsx)(f,{})]})})})},T=function(){var e=Object(i.g)().id;return Object(c.jsx)("div",{children:e})},B=n(20),A=n.n(B),D=n(27),z={login:function(){var e=Object(D.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E={signup:function(){var e=Object(D.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(e){var t=e.successInfo;return Object(c.jsx)("div",{className:"successContainer",children:Object(c.jsx)("div",{children:t})})},U=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),s=Object(u.a)(o,2),l=s[0],j=s[1],b=Object(r.useState)(""),d=Object(u.a)(b,2),p=d[0],h=d[1],v=Object(r.useState)(null),f=Object(u.a)(v,2),m=f[0],g=f[1],w=Object(r.useState)(null),k=Object(u.a)(w,2),S=k[0],C=k[1],N=Object(r.useState)(null),y=Object(u.a)(N,2),I=y[0],T=y[1],B=Object(r.useState)(!1),U=Object(u.a)(B,2),J=U[0],M=U[1],L=Object(i.f)(),R=function(){var e=Object(D.a)(A.a.mark((function e(t){var c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,z.login({username:n,password:l});case 4:c=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(c)),a(""),j(""),L.push("/"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),g("varify failed"),C("wrong username/password"),setTimeout((function(){g(null),C(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.signup({username:n,name:p,password:l});case 4:a(""),j(""),h(""),T("SignUp success!"),setTimeout((function(){T(null),L.push("/login")}),3e3),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),g("singup failed"),C("invalid username/password"),setTimeout((function(){g(null),C(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"loginContainer",children:!1===J?Object(c.jsxs)("form",{className:"loginForm",onSubmit:R,children:[Object(c.jsx)(x.b,{to:"/",style:{textDecoration:"none"},children:Object(c.jsx)("h2",{className:"appName",children:"Book Review Board"})}),null===m?Object(c.jsx)("div",{}):Object(c.jsx)(O,{errorType:m,errorInfo:S}),null===I?Object(c.jsx)("div",{}):Object(c.jsx)(F,{successInfo:I}),Object(c.jsx)("h3",{children:"Sign In"}),Object(c.jsx)("div",{className:"inputContainer",children:Object(c.jsx)("input",{type:"text",value:n,onChange:function(e){var t=e.target;return a(t.value)},placeholder:"username"})}),Object(c.jsx)("div",{className:"inputContainer",children:Object(c.jsx)("input",{type:"password",value:l,onChange:function(e){var t=e.target;return j(t.value)},placeholder:"password"})}),Object(c.jsx)("button",{className:"submitBtn",type:"submit",children:"Sign In"}),Object(c.jsx)("p",{className:"switchSign",onClick:function(){M(!0)},children:"create account"})]}):Object(c.jsxs)("form",{className:"signupForm",onSubmit:H,children:[Object(c.jsx)(x.b,{to:"/",style:{textDecoration:"none"},children:Object(c.jsx)("h2",{className:"appName",children:"Book Review Board"})}),null===m?Object(c.jsx)("div",{}):Object(c.jsx)(O,{errorType:m,errorInfo:S}),null===I?Object(c.jsx)("div",{}):Object(c.jsx)(F,{successInfo:I}),Object(c.jsx)("h3",{children:"Sign Up"}),Object(c.jsx)("div",{className:"inputContainer",children:Object(c.jsx)("input",{type:"text",value:n,onChange:function(e){var t=e.target;return a(t.value)},placeholder:"username"})}),Object(c.jsx)("div",{className:"inputContainer",children:Object(c.jsx)("input",{type:"text",value:p,onChange:function(e){var t=e.target;return h(t.value)},placeholder:"name"})}),Object(c.jsx)("div",{className:"inputContainer",children:Object(c.jsx)("input",{type:"password",value:l,onChange:function(e){var t=e.target;return j(t.value)},placeholder:"password"})}),Object(c.jsx)("button",{className:"submitBtn",type:"submit",children:"Sign In"}),Object(c.jsx)("p",{className:"switchSign",onClick:function(){M(!1)},children:"Have an account?"})]})})})},J=(n(95),function(){return Object(c.jsx)(U,{})}),M=function(){return Object(c.jsxs)(i.c,{children:[Object(c.jsx)(i.a,{path:"/",exact:!0,children:Object(c.jsx)(I,{})}),Object(c.jsx)(i.a,{path:"/login",exact:!0,children:Object(c.jsx)(J,{})}),Object(c.jsx)(i.a,{path:"/bookdetails/:id",children:Object(c.jsx)(T,{})})]})};s.a.render(Object(c.jsx)(x.a,{children:Object(c.jsx)(M,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.3da3c176.chunk.js.map