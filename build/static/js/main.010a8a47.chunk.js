(this["webpackJsonpbb-app"]=this["webpackJsonpbb-app"]||[]).push([[0],{27:function(e,t,n){},54:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n(29),o=n.n(a),i=n(2),u=n(4),s=n(11),l=n.n(s),j="/api/books",b=function(){return l.a.get(j).then((function(e){return e.data}))},d=function(e){return l.a.post(j,e).then((function(e){return e.data}))},O=(n(54),function(e){var t=e.errorType,n=e.errorInfo;return Object(r.jsxs)("div",{className:"errorContainer",children:[Object(r.jsx)("div",{children:"".concat(t," error!")}),Object(r.jsx)("div",{children:n})]})}),h=function(e){var t=e.setBooks,n=e.bookList,a=Object(c.useState)(""),o=Object(u.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)(""),j=Object(u.a)(l,2),b=j[0],h=j[1],f=Object(c.useState)(""),x=Object(u.a)(f,2),v=x[0],p=x[1],m=Object(c.useState)(null),g=Object(u.a)(m,2),w=g[0],k=g[1],S=Object(c.useState)(null),C=Object(u.a)(S,2),N=C[0],y=C[1];return Object(r.jsxs)("div",{children:[Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r,c={title:i,author:b,about:v};""===(r=c).title||""===r.author||""===r.about?(console.log(123),k("new book creation"),y("invalid input"),setTimeout((function(){k(null),y(null)}),3e3)):d(c).then((function(e){t(n.concat(e)),s(""),h(""),p("")})).catch((function(e){k("new book creation"),y("error"),setTimeout((function(){k(null),y(null)}),3e3)}))},children:[Object(r.jsx)("label",{htmlFor:"newTitle",children:"Title: "}),Object(r.jsx)("input",{value:i,id:"newTitle",onChange:function(e){e.preventDefault(),s(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"newAuthor",children:"Author: "}),Object(r.jsx)("input",{value:b,id:"newAuthor",onChange:function(e){e.preventDefault(),h(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"newAbout",children:"About: "}),Object(r.jsx)("input",{value:v,id:"newAbout",onChange:function(e){e.preventDefault(),p(e.target.value)}}),Object(r.jsx)("button",{type:"submit",children:"submit"})]}),null===w?Object(r.jsx)("div",{}):Object(r.jsx)(O,{errorType:w,errorInfo:N})]})},f=n(10),x=(n(27),function(e){var t=e.title,n=e.author,c=e.about,a=e.id;return Object(r.jsxs)("div",{className:"bookItemContainer",children:[Object(r.jsx)("h3",{className:"bookTitleContainer",children:Object(r.jsx)(f.b,{to:"/bookdetails/".concat(a),children:t})}),Object(r.jsxs)("small",{className:"bookAuthorContainer",children:["author: ",n]}),Object(r.jsx)("p",{className:"bookAboutContainer",children:c})]})}),v=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){return b().then((function(e){a(e)}))}),[]),Object(r.jsxs)("div",{children:[n.map((function(e){return Object(r.jsx)("div",{children:Object(r.jsx)(x,{title:e.title,author:e.author,about:e.about,id:e.id})},e.id)})),Object(r.jsx)(h,{setBooks:a,bookList:n})]})},p=n(12),m=n.n(p),g=n(14),w={login:function(){var e=Object(g.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){var t=e.username,n=e.name;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:t}),Object(r.jsxs)("div",{children:["hello, ",n]}),Object(r.jsx)("button",{onClick:function(){window.localStorage.clear()},children:"Log Out"})]})},S=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),i=Object(u.a)(o,2),s=i[0],l=i[1],j=Object(c.useState)(null),b=Object(u.a)(j,2),d=b[0],h=b[1],f=Object(c.useState)(null),x=Object(u.a)(f,2),v=x[0],p=x[1],S=Object(c.useState)(null),C=Object(u.a)(S,2),N=C[0],y=C[1];Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);h(t)}}),[]);var T=function(){var e=Object(g.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.login({username:n,password:s});case 4:r=e.sent,h(r),window.localStorage.setItem("loggedNoteappUser",JSON.stringify(r)),a(""),l(""),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),p("varify failed"),y("wrong username/password"),setTimeout((function(){p(null),y(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return null===d?Object(r.jsxs)("div",{children:[Object(r.jsxs)("form",{onSubmit:T,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"username: "}),Object(r.jsx)("input",{type:"text",value:n,onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"password: "}),Object(r.jsx)("input",{type:"text",value:s,onChange:function(e){var t=e.target;return l(t.value)}})]}),Object(r.jsx)("button",{type:"submit",children:"login"})]}),null===v?Object(r.jsx)("div",{}):Object(r.jsx)(O,{errorType:v,errorInfo:N})]}):Object(r.jsx)(k,{username:d.username,name:d.name})},C=function(){return Object(r.jsx)("div",{className:"projectContainer",children:Object(r.jsx)("div",{className:"mainContentContainer",children:Object(r.jsxs)("div",{className:"titleBookContainer",children:[Object(r.jsx)("h1",{className:"webTitle",children:"Book Review Board"}),Object(r.jsx)(S,{}),Object(r.jsx)(v,{})]})})})},N=function(){var e=Object(i.f)().id;return Object(r.jsx)("div",{children:e})},y=function(){return Object(r.jsxs)(i.c,{children:[Object(r.jsx)(i.a,{path:"/",exact:!0,component:C}),Object(r.jsx)(i.a,{path:"/bookdetails/:id",children:Object(r.jsx)(N,{})})]})};o.a.render(Object(r.jsx)(f.a,{children:Object(r.jsx)(y,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.010a8a47.chunk.js.map